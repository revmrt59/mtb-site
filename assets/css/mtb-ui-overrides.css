/* =========================================================
   MTB UI OVERRIDES (CLEAN BASELINE)
   Scope: Chapter pages only (book.html chapter views)
   Do NOT put LOC rules here.
   Do NOT set overflow on html/body.
   ========================================================= */

/* ---------------------------------------------------------
   1) Sticky CHAPTER header + tabs (under the primary header)
   --------------------------------------------------------- */

/* Sticky chapter header bar */
body[data-book][data-chapter] main.doc-shell > section.doc-header{
  position: sticky;
  top: var(--mtb-header-h, 64px);
  z-index: 2000;
  background: #eef3f8;                /* match your blue-grey band */
  border-bottom: 1px solid rgba(0,0,0,0.08);
}

/* Sticky tabs row */
body[data-book][data-chapter] main.doc-shell > section.tabs-shell{
  position: sticky;
  top: calc(var(--mtb-header-h, 64px) + 74px); /* adjust later if needed */
  z-index: 1900;
  background: #eef3f8;
  border-bottom: 1px solid rgba(0,0,0,0.08);
}

/* Prevent bleed-through gaps */
body[data-book][data-chapter] main.doc-shell > section.doc-header,
body[data-book][data-chapter] main.doc-shell > section.tabs-shell{
  background-clip: border-box;
}

/* ---------------------------------------------------------
   2) Chapter content panel width (non-scripture tabs)
   --------------------------------------------------------- */

body[data-book][data-chapter]:not([data-doc-type="chapter-scripture"]) main.doc-shell{
  max-width: 1500px;
  margin-left: auto;
  margin-right: auto;
}

/* ---------------------------------------------------------
   3) Chapter Scripture: wide + centered + stable
   --------------------------------------------------------- */

body[data-book][data-chapter][data-doc-type="chapter-scripture"] main.doc-shell{
  max-width: 1700px;
  margin-left: auto;
  margin-right: auto;
}

/* Make the scripture table/card fill and center */
body[data-book][data-chapter][data-doc-type="chapter-scripture"] #doc-target{
  max-width: none;
  margin-left: auto;
  margin-right: auto;
}

/* Keep the table from clipping */
body[data-book][data-chapter][data-doc-type="chapter-scripture"] #doc-target table{
  width: 100%;
  table-layout: fixed;
}

/* Make columns 2 and 3 equal, verse column narrow */
body[data-book][data-chapter][data-doc-type="chapter-scripture"] #doc-target table colgroup col:nth-child(1){
  width: 70px !important;
}
body[data-book][data-chapter][data-doc-type="chapter-scripture"] #doc-target table colgroup col:nth-child(2),
body[data-book][data-chapter][data-doc-type="chapter-scripture"] #doc-target table colgroup col:nth-child(3){
  width: calc((100% - 70px) / 2) !important;
}

/* Force wrapping so nothing gets cut off */
body[data-book][data-chapter][data-doc-type="chapter-scripture"] #doc-target th,
body[data-book][data-chapter][data-doc-type="chapter-scripture"] #doc-target td{
  white-space: normal;
  overflow-wrap: anywhere;
  word-break: break-word;
}

/* ---------------------------------------------------------
   4) Chapter nav arrows (keep scripture separate)
   --------------------------------------------------------- */

/* Default for most chapter tabs */
body[data-book][data-chapter]:not([data-doc-type="chapter-scripture"]) .chapter-nav{
  right: 24px;
}

/* Scripture page: keep nav out of the table */
body[data-book][data-chapter][data-doc-type="chapter-scripture"] .chapter-nav{
  right: 24px;
  top: 14px;
}

/* =========================================================
   ABOUT PAGE — sticky tab row, scroll only content
   ========================================================= */

body:has(.about-nav) .about-nav{
  position: sticky;
  top: var(--mtb-header-h, 64px);
  z-index: 2000;
  background: #eef3f8;
  border-bottom: 1px solid rgba(0,0,0,0.08);
}

/* Ensure the document area is the scrolling region */
body:has(.about-nav) #doc-target{
  overflow: auto;
}

/* =========================================================
   ABOUT — Tabs fixed, ONLY the white doc scrolls
   Works without body class. Uses :has(.about-nav).
   ========================================================= */

/* Kill window scrolling on pages that contain the About tabs */
html:has(.about-nav),
body:has(.about-nav){
  height: 100% !important;
  overflow: hidden !important;
}

/* Make the main area a flex column under the primary header */
body:has(.about-nav) main{
  height: calc(100vh - var(--mtb-header-h, 64px)) !important;
  overflow: hidden !important;

  display: flex !important;
  flex-direction: column !important;
  min-height: 0 !important; /* critical */
}

/* Tabs row stays visible */
body:has(.about-nav) .about-nav{
  flex: 0 0 auto !important;
  position: sticky !important;
  top: 0 !important;
  z-index: 5000 !important;

  background: #eef3f8 !important;
  border-bottom: 1px solid rgba(0,0,0,0.08) !important;
}

/* The white content becomes the ONLY scroll area */
body:has(.about-nav) #doc-target{
  flex: 1 1 auto !important;
  min-height: 0 !important; /* critical */
  overflow-y: auto !important;
  overflow-x: hidden !important;
}
/* =========================================================
   LOC HARMONY — VISUAL ONLY
   - Keep existing scroll behavior
   - Make LOC header + column headings blue-grey
   - Force nav arrows to the right
   ========================================================= */

/* 1) Make the LOC “top band” blue-grey (Back / Title / Prev-Next) */
body.loc-page .loc-seq-header{
  background: #eef3f8 !important;
  border-bottom: 1px solid rgba(0,0,0,0.10) !important;
}

/* If the header sits inside the white card, keep it visually clean */
body.loc-page .loc-seq-header{
  border-top-left-radius: 18px;
  border-top-right-radius: 18px;
}

/* 2) Force the header row layout: left / centered title / right arrows */
body.loc-page .loc-seq-header{
  display: flex !important;
  align-items: center !important;
  justify-content: space-between !important;
  gap: 16px !important;
}

body.loc-page .loc-seq-left{
  flex: 0 0 auto !important;
}

body.loc-page .loc-seq-center{
  flex: 1 1 auto !important;
  text-align: center !important;
}

body.loc-page .loc-seq-right{
  flex: 0 0 auto !important;
  margin-left: auto !important;
  display: flex !important;
  align-items: center !important;
  justify-content: flex-end !important;
  gap: 10px !important;
}

/* Safety: if #loc-prev/#loc-next get positioned weirdly elsewhere, reset them */
body.loc-page #loc-prev,
body.loc-page #loc-next{
  position: static !important;
}

/* 3) Make the “Translation” band blue-grey too (optional but usually matches) */
body.loc-page .loc-scroll-area,
body.loc-page .loc-harmony-controls,
body.loc-page .loc-scroll-head{
  background: #eef3f8 !important;
}

/* 4) Matthew / Mark / Luke / John header row blue-grey */
body.loc-page table.mtb-loc-harmony-table thead th{
  background: #eef3f8 !important;
  border-bottom: 1px solid rgba(0,0,0,0.10) !important;
}

/* Keep the table body as the white “sheet” */
body.loc-page table.mtb-loc-harmony-table{
  background: #ffffff !important;
}
/* =========================================================
   LOC HARMONY — Remove white card border/frame
   ========================================================= */

body.loc-page main.loc-main.mtb-paper{
  background: #eef3f8 !important;   /* match the blue-grey */
  border: none !important;          /* remove white border */
  box-shadow: none !important;      /* remove card shadow */
}
/* =========================================================
   LOC HARMONY — Force arrows to the RIGHT (3-column header)
   ========================================================= */

body.loc-page .loc-seq-header{
  display: flex !important;
  align-items: center !important;
}

/* Left / Center / Right columns */
body.loc-page .loc-seq-left{
  flex: 0 0 170px !important;
  display: flex !important;
  align-items: center !important;
}

body.loc-page .loc-seq-center{
  flex: 1 1 auto !important;
  text-align: center !important;
}

body.loc-page .loc-seq-right{
  flex: 0 0 170px !important;
  display: flex !important;
  justify-content: flex-end !important;
  align-items: center !important;
  gap: 10px !important;
}

/* If any earlier CSS made the buttons absolute/offset, neutralize it */
body.loc-page #loc-prev,
body.loc-page #loc-next{
  position: static !important;
  left: auto !important;
  right: auto !important;
  margin: 0 !important;
}
/* =========================================================
   RESOURCES TABLE — Improve spacing only
   ========================================================= */

.resource-table{
  width: 100%;
  border-collapse: separate;
  border-spacing: 0 14px;  /* vertical row spacing */
}

/* Header spacing */
.resource-table thead th{
  padding: 12px 18px;
  text-align: left;
  border-bottom: 1px solid rgba(0,0,0,0.12);
  white-space: nowrap;
}

/* Body cell spacing */
.resource-table tbody td{
  padding: 16px 18px;
  vertical-align: top;
}

/* Slight separation between rows */
.resource-table tbody tr{
  background: #fff;
}
/* Tighten Open / PDF header columns */
.resource-table thead th:last-child,
.resource-table thead th:nth-last-child(2),
.resource-table tbody td:last-child,
.resource-table tbody td:nth-last-child(2){
  width: 74px;
  padding-left: 8px;
  padding-right: 8px;
  text-align: left;
  white-space: nowrap;
}
/* =========================================================
   CHAPTER PAGES — STOP WHITE CONTENT FROM SHOWING THROUGH STICKY HEADER/TABS
   ========================================================= */

/* Give the sticky chapter header area an opaque background + stacking */
body[data-doc-type^="chapter"] .doc-header,
body[data-doc-type^="chapter"] .tabs-shell{
  background: var(--mtb-chrome, #eef3f8) !important;
  position: sticky !important;   /* in case one lost it */
  z-index: 200 !important;
}

/* Make sure the actual buttons row is also opaque */
body[data-doc-type^="chapter"] .tabs-shell{
  border-bottom: 1px solid rgba(0,0,0,0.08) !important;
}

/* If your chapter title area itself is a separate wrapper, keep it opaque too */
body[data-doc-type^="chapter"] .doc-head,
body[data-doc-type^="chapter"] .doc-head-inner{
  background: var(--mtb-chrome, #eef3f8) !important;
}