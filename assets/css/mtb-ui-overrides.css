/* =========================================================
   MTB UI OVERRIDES (CLEAN BASELINE)
   Scope: Chapter pages only (book.html chapter views)
   Do NOT put LOC rules here.
   Do NOT set overflow on html/body.
   ========================================================= */

/* ---------------------------------------------------------
   1) Sticky CHAPTER header + tabs (under the primary header)
   --------------------------------------------------------- */

/* Sticky chapter header bar */
body[data-book][data-chapter] main.doc-shell > section.doc-header{
  position: sticky;
  top: var(--mtb-header-h, 64px);
  z-index: 2000;
  background: #eef3f8;                /* match your blue-grey band */
  border-bottom: 1px solid rgba(0,0,0,0.08);
}

/* Sticky tabs row */
body[data-book][data-chapter] main.doc-shell > section.tabs-shell{
  position: sticky;
  top: calc(var(--mtb-header-h, 64px) + 74px); /* adjust later if needed */
  z-index: 1900;
  background: #eef3f8;
  border-bottom: 1px solid rgba(0,0,0,0.08);
}

/* Prevent bleed-through gaps */
body[data-book][data-chapter] main.doc-shell > section.doc-header,
body[data-book][data-chapter] main.doc-shell > section.tabs-shell{
  background-clip: border-box;
}

/* ---------------------------------------------------------
   2) Chapter content panel width (non-scripture tabs)
   --------------------------------------------------------- */

body[data-book][data-chapter]:not([data-doc-type="chapter-scripture"]) main.doc-shell{
  max-width: 1500px;
  margin-left: auto;
  margin-right: auto;
}

/* ---------------------------------------------------------
   3) Chapter Scripture: wide + centered + stable
   --------------------------------------------------------- */

body[data-book][data-chapter][data-doc-type="chapter-scripture"] main.doc-shell{
  max-width: 1700px;
  margin-left: auto;
  margin-right: auto;
}

/* Make the scripture table/card fill and center */
body[data-book][data-chapter][data-doc-type="chapter-scripture"] #doc-target{
  max-width: none;
  margin-left: auto;
  margin-right: auto;
}

/* Keep the table from clipping */
body[data-book][data-chapter][data-doc-type="chapter-scripture"] #doc-target table{
  width: 100%;
  table-layout: fixed;
}

/* Make columns 2 and 3 equal, verse column narrow */
body[data-book][data-chapter][data-doc-type="chapter-scripture"] #doc-target table colgroup col:nth-child(1){
  width: 70px !important;
}
body[data-book][data-chapter][data-doc-type="chapter-scripture"] #doc-target table colgroup col:nth-child(2),
body[data-book][data-chapter][data-doc-type="chapter-scripture"] #doc-target table colgroup col:nth-child(3){
  width: calc((100% - 70px) / 2) !important;
}

/* Force wrapping so nothing gets cut off */
body[data-book][data-chapter][data-doc-type="chapter-scripture"] #doc-target th,
body[data-book][data-chapter][data-doc-type="chapter-scripture"] #doc-target td{
  white-space: normal;
  overflow-wrap: anywhere;
  word-break: break-word;
}

/* ---------------------------------------------------------
   4) Chapter nav arrows (keep scripture separate)
   --------------------------------------------------------- */

/* Default for most chapter tabs */
body[data-book][data-chapter]:not([data-doc-type="chapter-scripture"]) .chapter-nav{
  right: 24px;
}

/* Scripture page: keep nav out of the table */
body[data-book][data-chapter][data-doc-type="chapter-scripture"] .chapter-nav{
  right: 24px;
  top: 14px;
}

/* =========================================================
   ABOUT PAGE — sticky tab row, scroll only content
   ========================================================= */

body:has(.about-nav) .about-nav{
  position: sticky;
  top: var(--mtb-header-h, 64px);
  z-index: 2000;
  background: #eef3f8;
  border-bottom: 1px solid rgba(0,0,0,0.08);
}

/* Ensure the document area is the scrolling region */
body:has(.about-nav) #doc-target{
  overflow: auto;
}

/* =========================================================
   ABOUT — Tabs fixed, ONLY the white doc scrolls
   Works without body class. Uses :has(.about-nav).
   ========================================================= */

/* Kill window scrolling on pages that contain the About tabs */
html:has(.about-nav),
body:has(.about-nav){
  height: 100% !important;
  overflow: hidden !important;
}

/* Make the main area a flex column under the primary header */
body:has(.about-nav) main{
  height: calc(100vh - var(--mtb-header-h, 64px)) !important;
  overflow: hidden !important;

  display: flex !important;
  flex-direction: column !important;
  min-height: 0 !important; /* critical */
}

/* Tabs row stays visible */
body:has(.about-nav) .about-nav{
  flex: 0 0 auto !important;
  position: sticky !important;
  top: 0 !important;
  z-index: 5000 !important;

  background: #eef3f8 !important;
  border-bottom: 1px solid rgba(0,0,0,0.08) !important;
}

/* The white content becomes the ONLY scroll area */
body:has(.about-nav) #doc-target{
  flex: 1 1 auto !important;
  min-height: 0 !important; /* critical */
  overflow-y: auto !important;
  overflow-x: hidden !important;
}