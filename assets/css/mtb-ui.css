/* =========================================================
   MTB UI (Design Layer)
   Purpose: A small, readable CSS layer that standardizes
   site aesthetics without patch-on-patch edits in style.css.
   ========================================================= */

/* -----------------------------
   Design tokens
----------------------------- */
:root{
  /* header */
  --mtb-header-h: 72px;

  /* colors */
  --mtb-border: #d7dde5;
  --mtb-paper: #ffffff;
  --mtb-bg: #eef2f6;

  /* layout */
  --mtb-maxw: 1100px;
  --mtb-maxw-wide: 1600px;
  --mtb-radius: 14px;
  --mtb-pad: 18px;
  --mtb-gap: 16px;

  /* LOC detail */
  --mtb-harmony-controls-h: 56px;
}

/* -----------------------------
   Global background
----------------------------- */
body{
  background: var(--mtb-bg);
}

/* -----------------------------
   Primary nav styling (safe global)
----------------------------- */
.main-nav{
  display: flex;
  align-items: center;
  gap: 16px;
  margin: 0;
}

/* -----------------------------
   Universal primary header
----------------------------- */
header.mtb-primary-header{
  position: sticky;
  top: 0;
  z-index: 5000;
  height: var(--mtb-header-h);
  background: var(--mtb-paper);
  border-bottom: 1px solid var(--mtb-border);
  display: flex;
  align-items: center;
}

/* -----------------------------
   Global content panel
----------------------------- */
.mtb-paper{
  max-width: var(--mtb-maxw);
  margin: 18px auto;
  background: var(--mtb-paper);
  border: 1px solid var(--mtb-border);
  border-radius: var(--mtb-radius);
  padding: var(--mtb-pad);

  /* Soft depth */
  box-shadow: 0 6px 18px rgba(0,0,0,0.06);
}

.mtb-paper.wide{
  max-width: var(--mtb-maxw-wide);
}

/* Pages that should tuck the panel directly under the sticky header */
body.mtb-no-gap .mtb-paper{
  margin-top: 0;
  border-top-left-radius: 0;
  border-top-right-radius: 0;
}

/* =========================================================
   LOC INDEX (loc/life-of-jesus.html)
   Body class used: loc-index
   Goal:
   - Title + filters never move
   - Only the table area scrolls
   ========================================================= */
body.loc-index main.doc-shell{
  max-width: 1700px;
  margin: 0 auto;
}

body.loc-index main.doc-shell.mtb-paper{
  padding: 18px;
}

body.loc-index .loc-head{
  display: flex;
  flex-direction: column;
  gap: 14px;
}

/* Title + controls are NOT sticky on this page */
body.loc-index .loc-sticky-header{
  position: relative;
  background: transparent;
  border: 0;
  padding: 0;
  margin: 0;
}

/* The only scroller */
body.loc-index .loc-scroll-area{
  overflow: auto;
  max-height: calc(100vh - 260px);
  background: transparent;
  border: 1px solid var(--mtb-border);
  border-radius: 12px;
}

/* Table */
body.loc-index table.mtb-loc-head-table{
  width: 100%;
  table-layout: fixed;
  border-collapse: collapse;
  background: #fff;
}

/* Sticky table header inside scroller */
body.loc-index table.mtb-loc-head-table thead th{
  position: sticky;
  top: 0;
  z-index: 5;
  background: #fff;
  border-bottom: 1px solid var(--mtb-border);
  text-align: left;
}

/* Cells */
body.loc-index table.mtb-loc-head-table th,
body.loc-index table.mtb-loc-head-table td{
  padding: 10px 10px;
  border-bottom: 1px solid rgba(0,0,0,0.06);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Make Event Title column wider (5th column) */
body.loc-index table.mtb-loc-head-table th:nth-child(5),
body.loc-index table.mtb-loc-head-table td:nth-child(5){
  width: 30%;
}

/* Restore standard blue links in LOC index */
body.loc-index table.mtb-loc-head-table a{
  color: #1a5fd1;
  text-decoration: underline;
}
body.loc-index table.mtb-loc-head-table a:hover{
  color: #0f3ea8;
}

/* =========================================================
   LIFE OF JESUS LIST PAGE (optional extra class)
   If you keep body class loj-index, support it too.
   ========================================================= */
body.loj-index main.doc-shell.mtb-paper{
  height: calc(100vh - var(--mtb-header-h));
  display: flex;
  flex-direction: column;
  overflow: hidden;
  margin-top: 0;
}

body.loj-index .loc-sticky-header{
  position: static !important;
}

body.loj-index .loc-scroll-area{
  flex: 1;
  min-height: 0;
  overflow: auto;
}

/* =========================================================
   LOC DETAIL (loc.html)
   Body class used: loc-page
   Goal:
   - Site header fixed
   - Event title fixed
   - Translation bar sticky
   - Matthew/Mark/Luke/John row sticky beneath translation bar
   - Verses scroll within the panel
   ========================================================= */

/* Prevent the browser window from scrolling on loc detail */
body.loc-page{
  height: 100vh;
  overflow: hidden;
}

/* Main is a fixed-height flex column under the site header */
body.loc-page main.loc-main{
  height: calc(100vh - var(--mtb-header-h));
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

/* Event title stays fixed because it is outside the scroller */
body.loc-page .loc-title{
  flex: 0 0 auto;
  padding: 24px 32px 16px 32px;
}

/* Only this area scrolls */
body.loc-page .loc-scroll-area{
  flex: 1 1 auto;
  min-height: 0;

  /* Always reserve scrollbar space so nothing "jumps" on first scroll */
  overflow-y: scroll;
  overflow-x: auto;
  scrollbar-gutter: stable;

  padding: 0 32px 32px 32px;
}


/* Translation controls: sticky at top of the scroller */
body.loc-page .loc-harmony-controls{
  position: sticky;
  top: 0;
  z-index: 30;
  background: var(--mtb-paper);
  min-height: var(--mtb-harmony-controls-h);
  display: flex;
  align-items: center;
  gap: 10px;

  /* neutralize injected margins that cause jumping */
 margin: 0 !important;
padding: 12px 0 12px 0;
  border-bottom: 1px solid var(--mtb-border);
}

/* Column headers: make the whole THEAD sticky (stable bottom line) */
body.loc-page .mtb-loc-harmony-table{
  border-collapse: separate;
  border-spacing: 0;
}

body.loc-page .mtb-loc-harmony-table thead th{
  position: sticky;
  top: var(--mtb-harmony-controls-h);
  z-index: 50;
  background: var(--mtb-paper) !important;
  box-shadow: 0 2px 0 var(--mtb-border);
}

body.loc-page .mtb-loc-harmony-table tbody td{
  position: relative;
  z-index: 1;
  background: #fff;
}



/* =========================================================
   WORD STUDY MODAL (single source of truth)
========================================================= */

.ws-modal {
  position: fixed;
  inset: 0;
  z-index: 9998;
}

.ws-modal-backdrop {
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,.40);
}

.ws-modal-panel {
  position: relative;
  margin: 6vh auto;
  width: min(920px, calc(100vw - 24px));
  max-height: 88vh;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  background: #ffffff;
  border-radius: 14px;
  box-shadow: 0 16px 50px rgba(0,0,0,.30);
}

.ws-modal-header {
  position: sticky;
  top: 0;
  z-index: 10;
  display: flex;
  justify-content: flex-end;
  align-items: center;
  padding: 12px 12px;
  background: #f5f5f5;
  border-bottom: 1px solid #ddd;
}

.ws-modal-close {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 8px 12px;
  margin: 0;
  font-size: 14px;
  line-height: 1.2;
  background: #ffffff;
  border: 1px solid #ccc;
  border-radius: 8px;
  cursor: pointer;
}

.ws-modal-body {
  overflow-y: auto;
  padding: 16px;
}


/* =========================================================
   POPUP BOX POLISH — Word Study / Chapter Explanation
   Scope: modal only
   ========================================================= */

/* Bible text box */
.ws-modal-body .MTB-Read{
  border-left: 0 !important;
  border: 1px solid rgba(30, 90, 168, 0.25) !important;
  background: rgba(30, 90, 168, 0.08) !important;
  border-radius: 12px;
}

/* Dwell box spacing */
.ws-modal-body .MTB-Read + .MTB-Dwell{
  margin-top: 16px !important;
}

.ws-modal-body .MTB-Dwell + .MTB-Read{
  margin-top: 16px !important;
}

/* Ensure all popup blocks match shape */
.ws-modal-body .MTB-Read,
.ws-modal-body .MTB-Explain,
.ws-modal-body .MTB-Dwell{
  border-radius: 12px;
}

/* =========================================================
   POPUP OVERRIDES — force Bible (Read) box styling in modal
   Reason: global #doc-target MTB cards use !important and win.
   ========================================================= */

/* Bible text box inside modal */
.ws-modal-body #doc-target .MTB-Read{
  border-left: 0 !important; /* remove dark left edge */
  border: 1px solid rgba(30, 90, 168, 0.25) !important;
  background: rgba(30, 90, 168, 0.08) !important;
  border-radius: 12px !important;

  /* spacing below Read in popups */
  margin: 0 0 16px 0 !important;
}

/* Dwell spacing from Read in modal */
.ws-modal-body #doc-target .MTB-Dwell{
  margin: 0 0 16px 0 !important;
  border-radius: 12px !important;
}

/* Prevent your “merge consecutive blocks” rules from removing spacing inside modal */
.ws-modal-body #doc-target .MTB-Read + .MTB-Read,
.ws-modal-body #doc-target .MTB-Dwell + .MTB-Dwell{
  margin-top: 16px !important;
  border-top: 1px solid rgba(0,0,0,0.06) !important;
}
/* =========================================================
   POPUP: Bible text box polish (mtb-scripture-block)
   Goals:
   1) Remove dark left edge
   2) Add a touch more color (softer, cleaner)
   3) Add space between Bible text box and Dwell boxes
   Scope: popup only
   ========================================================= */

/* Bible text box in popup */
.ws-modal-body .mtb-scripture-block{
  border-left: 0 !important;                 /* remove dark left bar */
  border: 1px solid rgba(30, 90, 168, 0.25) !important;
  background: rgba(30, 90, 168, 0.06) !important;
  border-radius: 12px !important;
  padding: 12px 14px !important;
  margin: 0 0 16px 0 !important;             /* creates space below */
}

/* Ensure space between Bible text and Dwell blocks in popup */
.ws-modal-body .mtb-scripture-block + .MTB-Dwell,
.ws-modal-body .mtb-scripture-block + .MTB-Dwell-Group{
  margin-top: 16px !important;
}

/* If Dwell comes first then Bible text */
.ws-modal-body .MTB-Dwell + .mtb-scripture-block,
.ws-modal-body .MTB-Dwell-Group + .mtb-scripture-block{
  margin-top: 16px !important;
}
/* =========================================================
   POPUP: Bible text (MTB-Read) color + spacing
   Goal: override style.css (#doc-target .MTB-Read { ... !important })
   ========================================================= */

.ws-modal-body #doc-target .MTB-Read,
.ws-modal-panel #doc-target .MTB-Read{
  background: rgba(30, 90, 168, 0.07) !important;  /* gentle blue tint */
  border: 1px solid rgba(30, 90, 168, 0.22) !important;
  border-radius: 12px !important;
}

/* Space between Bible text and Dwell inside popup */
.ws-modal-body #doc-target .MTB-Read + .MTB-Dwell,
.ws-modal-panel #doc-target .MTB-Read + .MTB-Dwell{
  margin-top: 14px !important;
}
/* =========================================================
   Chapter-Explanation pages: MTB-Read color (Bible text box)
   ========================================================= */

body[data-doc-type="chapter-explanation"] #doc-target .MTB-Read,
body[data-doc-type="chapter-explanation"] #doc-target h1.MTB-Read{
  background: rgba(30, 90, 168, 0.08) !important;
  border: 1px solid rgba(30, 90, 168, 0.22) !important;
  border-radius: 12px !important;
}
/* =========================================================
   MTB DWELL GROUP (GLOBAL SAFE)
   Applies to chapter explanation, book intro, and modal docs
   ========================================================= */

#doc-target .MTB-Dwell-Group,
main.doc-shell .MTB-Dwell-Group,
#book-modal .MTB-Dwell-Group{
  background: #f4f8f3;
  border: 1px solid #cddfca;
  border-left: 6px solid #2e6b2e;
  border-radius: 14px;
  padding: 16px 18px;
  margin: 18px 0;
}

/* Remove spacing between grouped dwell blocks */
#doc-target .MTB-Dwell-Group .MTB-Dwell,
#doc-target .MTB-Dwell-Group p.MTB-Dwell,
#doc-target .MTB-Dwell-Group div.MTB-Dwell,
#doc-target .MTB-Dwell-Group ul,
#doc-target .MTB-Dwell-Group ol,
main.doc-shell .MTB-Dwell-Group .MTB-Dwell,
main.doc-shell .MTB-Dwell-Group p.MTB-Dwell,
main.doc-shell .MTB-Dwell-Group div.MTB-Dwell,
main.doc-shell .MTB-Dwell-Group ul,
main.doc-shell .MTB-Dwell-Group ol,
#book-modal .MTB-Dwell-Group .MTB-Dwell,
#book-modal .MTB-Dwell-Group p.MTB-Dwell,
#book-modal .MTB-Dwell-Group div.MTB-Dwell,
#book-modal .MTB-Dwell-Group ul,
#book-modal .MTB-Dwell-Group ol{
  margin: 0 0 10px 0;
}

/* Remove bottom margin on last element inside group */
#doc-target .MTB-Dwell-Group > *:last-child,
main.doc-shell .MTB-Dwell-Group > *:last-child,
#book-modal .MTB-Dwell-Group > *:last-child{
  margin-bottom: 0;
}

body.loc-page .loc-seq-left{
  flex: 0 0 auto;
}

body.loc-page .loc-seq-center{
  flex: 1 1 auto;
  display: flex;
  justify-content: center;   /* centers the title block */
}

body.loc-page .loc-seq-right{
  flex: 0 0 auto;
  display: flex;
  align-items: center;
  gap: 10px;
}

/* Put Scripture Harmony left of the arrows */
body.loc-page #loc-tab-scripture{ order: 1; }
body.loc-page #loc-prev{ order: 2; }
body.loc-page #loc-next{ order: 3; }


/* =========================================================
   LOC HEADER BUTTONS
   Standardized to match Chapter Scripture behavior
   ========================================================= */

body.loc-page #loc-back,
body.loc-page #loc-prev,
body.loc-page #loc-next{
  display: inline-flex;
  align-items: center;
  justify-content: center;

  padding: 14px 18px;
  border-radius: 10px;

background: rgba(226, 232, 240, 0.95);
  color: #222;
  font-weight: 600;

  border: 1px solid rgba(15, 23, 42, 0.18);
  box-shadow: 0 10px 22px rgba(0,0,0,0.12);

  text-decoration: none;
  cursor: pointer;
  transition: all 0.15s ease;
}

/* Slightly tighter arrows */
body.loc-page #loc-prev,
body.loc-page #loc-next{
  padding: 10px 12px;
  min-width: 44px;
}

/* FULL BLUE hover (matches Chapter Scripture active blue) */
body.loc-page #loc-back:hover,
body.loc-page #loc-prev:hover,
body.loc-page #loc-next:hover{
  background: #3b6fb6 !important;
  border-color: #3b6fb6 !important;
  color: #ffffff !important;
}

/* Active press */
body.loc-page #loc-back:active,
body.loc-page #loc-prev:active,
body.loc-page #loc-next:active{
  background: #2f5f9f !important;
  border-color: #2f5f9f !important;
  color: #ffffff !important;
}

/* Disabled arrows */
body.loc-page #loc-prev:disabled,
body.loc-page #loc-next:disabled{
  opacity: 0.45;
  cursor: default;
}
/* =========================================================
   LOC SEQUENCE TITLE — Slightly Larger
   ========================================================= */

body.loc-page #loc-sequence-title{
  font-size: 24px;
  font-weight: 600;
  line-height: 1.25;
}
/* Hide Scripture Harmony button in the LOC sequence header */

body.loc-page .loc-seq-header .loc-seq-right > button:first-child{
  display: none !important;
}
/* Harmony table — evenly distributed columns */
body.loc-page .mtb-loc-harmony-table{
  width: 100%;
  table-layout: fixed;
}

body.loc-page .mtb-loc-harmony-table th,
body.loc-page .mtb-loc-harmony-table td{
  padding: 20px 24px;
}
/* =========================================================
   MTB DOC WRAPPER — Neutral (never becomes a card)
   ========================================================= */

#doc-target .mtb-doc--read,
main.doc-shell .mtb-doc--read,
#book-modal .mtb-doc--read{
  background: transparent !important;
  border: 0 !important;
  box-shadow: none !important;
  border-radius: 0 !important;
  padding: 0 !important;
  margin: 0 !important;
  font-weight: inherit !important;
}

/* =========================================================
   MTB-READ BLOCK (actual Bible/read box styling)
   ========================================================= */

#doc-target .MTB-Read,
main.doc-shell .MTB-Read,
#book-modal .MTB-Read{
  display: block;
  background: rgba(30, 90, 168, 0.06);
  border: 1px solid rgba(30, 90, 168, 0.22);
  border-left: 0;
  border-radius: 14px;
  padding: 14px 16px;
  margin: 0 0 14px 0;
  line-height: 1.55;
  font-weight: 650;
}
/* =========================================================
   GLOBAL CONTENT STYLE — MTB Blue Bold
   Word style may emit as:
   - MTB-Text-Highlight
   - MTB-Blue-Bold
   - mtb-blue-bold
   This makes it work everywhere.
   ========================================================= */

.MTB-Text-Highlight,
.MTB-Blue-Bold,
.mtb-blue-bold{
  color: #1e5bd8 !important;
  font-weight: 700 !important;
}
/* =========================================================
   CLEAN MTB DWELL GROUP (stable version)
   ========================================================= */

#doc-target .MTB-Dwell-Group,
main.doc-shell .MTB-Dwell-Group,
#book-modal .MTB-Dwell-Group{
  background: #f4f8f3;
  border: 1px solid #cddfca;
  border-left: 6px solid #2e6b2e;
  border-radius: 14px;
  padding: 16px 18px;
  margin: 18px 0;
}

/* Lists inside dwell */
#doc-target .MTB-Dwell-Group ul,
main.doc-shell .MTB-Dwell-Group ul,
#book-modal .MTB-Dwell-Group ul{
  margin: 6px 0 6px 22px;
  padding: 0;
}

#doc-target .MTB-Dwell-Group li,
main.doc-shell .MTB-Dwell-Group li,
#book-modal .MTB-Dwell-Group li{
  margin: 2px 0;
  padding: 0;
}

/* Remove paragraph margins inside list items */
#doc-target .MTB-Dwell-Group li > p,
main.doc-shell .MTB-Dwell-Group li > p,
#book-modal .MTB-Dwell-Group li > p{
  margin: 0;
}
/* =========================================================
   FIX: Split boxes inside MTB-Dwell-Group
   Cause: bullet paragraphs still have class .MTB-Dwell, so each
          bullet becomes its own card.
   Solution: neutralize .MTB-Dwell styling INSIDE the group only.
   ========================================================= */

#doc-target .MTB-Dwell-Group .MTB-Dwell,
main.doc-shell .MTB-Dwell-Group .MTB-Dwell,
#book-modal .MTB-Dwell-Group .MTB-Dwell,
#doc-target .MTB-Dwell-Group p.MTB-Dwell,
main.doc-shell .MTB-Dwell-Group p.MTB-Dwell,
#book-modal .MTB-Dwell-Group p.MTB-Dwell,
#doc-target .MTB-Dwell-Group div.MTB-Dwell,
main.doc-shell .MTB-Dwell-Group div.MTB-Dwell,
#book-modal .MTB-Dwell-Group div.MTB-Dwell{
  background: transparent !important;
  border: 0 !important;
  border-left: 0 !important;
  box-shadow: none !important;
  border-radius: 0 !important;
  padding: 0 !important;
  margin: 0 !important;
}
/* =========================================================
   Remove thick left border from MTB-Dwell-Group
   ========================================================= */

#doc-target .MTB-Dwell-Group,
main.doc-shell .MTB-Dwell-Group,
#book-modal .MTB-Dwell-Group{
  border-left: 0 !important;
}

/* =========================================================
   MTB Chapter Tabs — SINGLE SOURCE OF TRUTH (FINAL)
   Put this at the very bottom of mtb-ui.css
   ========================================================= */

/* ---------- A) Default chapter tabs (Orientation / Insights / EG / Resources / Explanation) ---------- */
body:not(.mtb-has-scripture-controls){
  background: #eef2f6;
}

/* Center the whole panel */
body:not(.mtb-has-scripture-controls) main.doc-shell{
  max-width: 1500px;          /* adjust once here */
  margin-left: auto;
  margin-right: auto;
}

/* Outer panel stays white */
body:not(.mtb-has-scripture-controls) .mtb-paper{
  background: #ffffff;
  border-radius: 18px;
  box-shadow: 0 2px 12px rgba(0,0,0,0.06);
}

/* Header band (where the chapter title + tabs sit) stays blue-grey */
body:not(.mtb-has-scripture-controls) .doc-header{
  background: #eef2f6;
  border-top-left-radius: 18px;
  border-top-right-radius: 18px;
}

/* Content area should NOT be a second card */
body:not(.mtb-has-scripture-controls) #doc-target{
  background: transparent;
  border: 0;
  box-shadow: none;
  max-width: none;
  padding: 0;
}

/* =========================================================
   Chapter tabs: single-card layout
   - #doc-target becomes a neutral container (no card)
   - injected .mtb-doc becomes the one consistent white card
   ========================================================= */

/* Make #doc-target a neutral container on ALL chapter tabs */
body[data-book][data-chapter] #doc-target{
  background: transparent !important;
  border: 0 !important;
  box-shadow: none !important;
  border-radius: 0 !important;
  padding: 0 !important;
  margin: 0 !important;
}

/* Give the injected MTB document the card styling (orientation/insights/culture/explanation/resources) */
body[data-book][data-chapter]:not(.mtb-has-scripture-controls) #doc-target > .mtb-doc,
body[data-book][data-chapter]:not(.mtb-has-scripture-controls) #doc-target section.mtb-doc{
  background: #ffffff !important;
  border: 1px solid var(--mtb-border) !important;
  border-radius: 14px !important;
  box-shadow: 0 2px 10px rgba(0,0,0,0.06) !important;
  padding: 22px 22px !important;
  margin: 0 auto 22px auto !important;
  max-width: var(--mtb-maxw-wide, 1200px) !important;
}

/* Keep chapter-explanation content comfortably wide, but inside the card */
body[data-book][data-chapter][data-doc-type="chapter-explanation"] #doc-target section.mtb-doc{
  max-width: var(--mtb-maxw-wide, 1200px) !important;
}
/* IMPORTANT: do NOT touch .MTB-Read (that is the verse read callout box) */
/* =========================================================
   MTB FIX PACK (cards + explanation + scripture width)
   Paste at BOTTOM of mtb-ui.css
   ========================================================= */

/* 1) One consistent “blue-gray” site chrome */
:root{
  --mtb-chrome: #eef3f7;   /* page background */
  --mtb-surface: #ffffff;  /* card/background surfaces */
  --mtb-border: #d7dee7;
}

body{
  background: var(--mtb-chrome);
}

/* 2) Make the injected doc sections render as WHITE cards again
      (Orientation / Insights / EG Culture / Resources) */
#doc-target section.mtb-doc{
  background: var(--mtb-surface) !important;
  border: 1px solid var(--mtb-border) !important;
  border-radius: 14px !important;
  box-shadow: 0 2px 10px rgba(0,0,0,0.06) !important;
}

/* Keep those pages centered and a touch wider */
body[data-doc-type="chapter-orientation"] #doc-target,
body[data-doc-type="chapter-insights"] #doc-target,
body[data-doc-type="chapter-eg-culture"] #doc-target,
body[data-doc-type="chapter-resources"] #doc-target{
  max-width: 1200px !important;
  margin: 0 auto 22px !important;
  padding: 0 22px 22px !important;
  background: transparent !important;
  border: 0 !important;
  box-shadow: none !important;
}

/* 3) Chapter Explanation: remove the “outer page / inner page” look.
      We keep the CONTENT, but remove the extra card container. */
body[data-doc-type="chapter-explanation"] #doc-target{
  max-width: 1200px !important;
  margin: 0 auto 22px !important;
  padding: 0 22px 22px !important;
  background: transparent !important;
  border: 0 !important;
  box-shadow: none !important;
}

/* Kill the card styling ONLY for chapter explanation wrapper */
body[data-doc-type="chapter-explanation"] #doc-target section.mtb-doc,
body[data-doc-type="chapter-explanation"] #doc-target .mtb-doc--chapter-explanation{
  background: transparent !important;
  border: 0 !important;
  box-shadow: none !important;
  border-radius: 0 !important;
  padding: 0 !important;
  margin: 0 !important;
}








/* =========================================================
   MTB CHAPTER LAYOUT FIX (matches current DOM)
   ========================================================= */

/* Site chrome */
:root{
  --mtb-chrome: #eef3f7;
  --mtb-card: #ffffff;
  --mtb-border: #d7dee7;
}

/* Page background */
body[data-book][data-chapter]{
  background: var(--mtb-chrome);
}

/* Remove card styling from outer containers */
main.doc-shell,
#doc-layout,
article.doc-main,
#doc-target{
  background: transparent !important;
  border: 0 !important;
  box-shadow: none !important;
}

/* The injected document becomes the ONLY white card */
#doc-target > section.mtb-doc{
  background: var(--mtb-card) !important;
  border: 1px solid var(--mtb-border) !important;
  border-radius: 14px !important;
  box-shadow: 0 2px 10px rgba(0,0,0,0.06) !important;
  padding: 22px !important;
  margin: 0 auto 22px !important;
  max-width: 1200px !important;
}

/* Scripture table gets wider automatically */
body.mtb-has-scripture-controls #doc-target > section.mtb-doc{
  max-width: min(1600px, calc(100vw - 80px)) !important;
}

/* Scripture table fills width */
/* =========================================================
   Chapter Explanation tweaks
   ========================================================= */

/* 1) Ensure the white document card is centered */
#doc-target{
  width: 100% !important;
  display: block !important;
}

#doc-target > section.mtb-doc{
  margin-left: auto !important;
  margin-right: auto !important;
}



/* 3) Hide Read / Understand / Dwell buttons (for now) */
#ce-modebar{
  display: none !important;
}
/* =========================================================
   MTB FIXPACK: Chapter pages alignment + explanation card
   Add at very bottom of mtb-ui.css so it overrides everything
   ========================================================= */

/* 1) Pull the whole chapter header/tabs area in from the far edges
      (this also moves the prev/next arrow buttons left because they live in this row) */
main.doc-shell.wide .doc-header,
main.doc-shell.wide .tabs-shell,
main.doc-shell.wide #doc-layout {
  max-width: 1400px;     /* adjust (e.g., 1320–1500) if you want */
  margin-left: auto;
  margin-right: auto;
}

/* 2) Temporarily hide READ / UNDERSTAND / DWELL buttons */
body[data-doc-type="chapter-explanation"] #ce-modebar{
  display: none !important;
}

/* 3) Chapter Explanation: restore a centered white “document card” inside doc-target */
body[data-doc-type="chapter-explanation"] #doc-target section.mtb-doc.mtb-doc--chapter-explanation{
  background: #ffffff !important;
  border: 1px solid var(--mtb-border) !important;
  border-radius: 14px !important;
  box-shadow: 0 2px 10px rgba(0,0,0,0.06) !important;

  max-width: 1100px;     /* card width */
  margin: 0 auto 24px !important;
  padding: 26px 28px !important;
}

/* Safety: if the injected explanation content ever shows up without the section wrapper,
   keep it readable and centered anyway */
body[data-doc-type="chapter-explanation"] #doc-target{
  max-width: 1400px;
  margin-left: auto;
  margin-right: auto;
}
/* =========================================================
   MTB CENTERING FIX (wins against almost anything)
   Put at very bottom of mtb-ui.css
   ========================================================= */

body[data-book][data-chapter] main.doc-shell.wide .doc-header,
body[data-book][data-chapter] main.doc-shell.wide .tabs-shell,
body[data-book][data-chapter] main.doc-shell.wide #doc-layout,
body[data-book][data-chapter] main.doc-shell.wide #doc-target{
  /* center the whole “page column” */
  width: min(1400px, calc(100% - 44px)) !important;
  margin-left: auto !important;
  margin-right: auto !important;
}

/* Give chapter pages a consistent outer blue-gray (optional but helps blend) */
body[data-book][data-chapter] main.doc-shell.wide{
  background: transparent !important;
}

/* =========================================================
   WHITE DOCUMENT CARD for chapter pages (orientation/insights/culture/explanation)
   ========================================================= */
body[data-doc-type^="chapter-"] #doc-target > .mtb-doc{
  background: #ffffff !important;
  border: 1px solid var(--mtb-border) !important;
  border-radius: 14px !important;
  box-shadow: 0 2px 10px rgba(0,0,0,0.06) !important;

  max-width: 1100px !important;
  margin: 0 auto 24px !important;
  padding: 26px 28px !important;
}

/* =========================================================
   TEMP: hide Read / Understand / Dwell on chapter explanation
   ========================================================= */
body[data-doc-type="chapter-explanation"] #ce-modebar{
  display: none !important;
}


/* =========================================================
   CENTER THE CHAPTER CONTENT COLUMN (non-scripture pages)
   This targets the real layout container, not just the card.
   ========================================================= */
body[data-book][data-chapter]:not(.mtb-has-scripture-controls) #doc-layout{
  display: block !important;
}



/* Keep the actual document card centered inside that column */
body[data-doc-type^="chapter-"]:not(.mtb-has-scripture-controls) #doc-target > .mtb-doc{
  max-width: 1100px !important;
  margin-left: auto !important;
  margin-right: auto !important;
}
/* =========================================================
   CENTER NON-SCRIPTURE CHAPTER PAGES WITHOUT WIDENING THEM
   ========================================================= */

/* Center the grid content area itself */
body[data-book][data-chapter]:not(.mtb-has-scripture-controls) #doc-layout{
  display: grid !important;
  justify-content: center !important;  /* centers the grid contents */
}

/* Don't force doc-main wider; just keep it centered */
body[data-book][data-chapter]:not(.mtb-has-scripture-controls) article.doc-main{
  width: auto !important;
  max-width: 100% !important;
  margin-left: 0 !important;
  margin-right: 0 !important;
}

/* Your white "document" card: keep your existing width, just center it */
body[data-doc-type^="chapter-"]:not(.mtb-has-scripture-controls) #doc-target > .mtb-doc{
  margin-left: auto !important;
  margin-right: auto !important;
}
/* =========================================================
   CENTER NON-SCRIPTURE CHAPTER PAGES (keep current width)
   + MOVE NAV ARROWS LEFT (non-scripture only)
   ========================================================= */

/* 1) Center the main chapter column WITHOUT changing its width */
body[data-book][data-chapter]:not(.mtb-has-scripture-controls) main.doc-shell.wide{
  margin-left: auto !important;
  margin-right: auto !important;
}

/* The actual content column (this is usually the real "page") */
body[data-book][data-chapter]:not(.mtb-has-scripture-controls) article.doc-main{
  margin-left: auto !important;
  margin-right: auto !important;
}



/* Give the tab row a little right padding so arrows never overlap tabs */
body.mtb-has-scripture-controls #tabs{
  padding-right: 160px !important;
}

/* Add a little top spacing before the table/card so arrows don't overlap content */
body.mtb-has-scripture-controls #doc-target{
  margin-top: 16px !important;
}
/* =========================================================
   CHAPTER NAV POSITIONING (clean, correct targeting)
   ========================================================= */

/* Non-scripture chapter pages */
body[data-book][data-chapter]:not(.mtb-has-scripture-controls) .chapter-nav{
  left: auto !important;
  right: 350px !important;   /* adjust to taste */
}

/* Scripture page */
body.mtb-has-scripture-controls .chapter-nav{
  left: auto !important;
  right: 80px !important;    /* original good position */
  top: 14px !important;
}
/* =========================================================
   CENTER THE WHITE DOC CARD (non-scripture chapter pages)
   Keep current card width, just center it in the screen
   ========================================================= */
body[data-book][data-chapter]:not(.mtb-has-scripture-controls) #doc-target{
  margin-left: auto !important;
  margin-right: auto !important;
}

/* If the injected section is the actual "white card", center it too */
body[data-book][data-chapter]:not(.mtb-has-scripture-controls) #doc-target > .mtb-doc{
  margin-left: auto !important;
  margin-right: auto !important;
}
body[data-book][data-chapter]:not(.mtb-has-scripture-controls) article.doc-main{
  justify-content: center !important;  /* flex */
  justify-items: center !important;    /* grid */
}
/* =========================================================
   CENTER THE WHITE DOCUMENT (non-scripture chapter tabs)
   Centers the injected .mtb-doc card itself without changing width.
   ========================================================= */

body[data-book][data-chapter]:not(.mtb-has-scripture-controls)
#doc-target > section.mtb-doc{
  margin-left: auto !important;
  margin-right: auto !important;
}

/* If some pages inject the mtb-doc deeper, cover that too */
body[data-book][data-chapter]:not(.mtb-has-scripture-controls)
#doc-target section.mtb-doc{
  margin-left: auto !important;
  margin-right: auto !important;
}

/* Non-scripture tabs: ensure doc-target is symmetric so centering is visually perfect */
body[data-book][data-chapter]:not(.mtb-has-scripture-controls) #doc-target{
  padding-left: 22px !important;
  padding-right: 22px !important;
}
/* =========================================================
   FINAL CENTERING – NON SCRIPTURE CHAPTER PAGES
   One rule. One responsibility.
   ========================================================= */

body[data-book][data-chapter]:not(.mtb-has-scripture-controls)
#doc-target > section.mtb-doc{
  max-width: 1100px !important;   /* keep your good readable width */
  width: 100% !important;
  margin: 0 auto 24px auto !important;
}
/* =========================================================
   CHAPTER SCRIPTURE — SINGLE SOURCE OF TRUTH (FINAL)
   Hook: body.mtb-has-scripture-controls
   - Wide, stable layout (no snap-back)
   - Table expands and stays wide
   ========================================================= */

body.mtb-has-scripture-controls main.doc-shell.wide,
body.mtb-has-scripture-controls .mtb-paper{
  max-width: min(2000px, calc(100vw - 64px)) !important; /* adjust this ONE number */
  margin-left: auto !important;
  margin-right: auto !important;
}

/* Let the scripture "document card" fill the wide shell */
body.mtb-has-scripture-controls #doc-target{
  max-width: none !important;
  width: 100% !important;
}

/* Ensure the injected doc section is not capped */
body.mtb-has-scripture-controls #doc-target > section.mtb-doc{
  max-width: none !important;
  width: 100% !important;
  margin-left: auto !important;
  margin-right: auto !important;
}

/* Wrapper should fill and allow horizontal scroll on small screens */
body.mtb-has-scripture-controls #doc-target .mtb-chapter-scripture-wrap{
  max-width: none !important;
  width: 100% !important;
  overflow-x: auto !important;
}

/* Table: expand naturally (do NOT force fixed layout) */
body.mtb-has-scripture-controls #doc-target table{
  width: 100% !important;
  max-width: none !important;
  table-layout: auto !important;
  min-width: 1500px !important;   /* bump to 1600/1700 if desired */
}

/* Keep nav arrows in the "good" position for scripture */
body.mtb-has-scripture-controls .chapter-nav{
  left: auto !important;
  right: 24px !important;
  top: 14px !important;
}
/* =========================================================
   WIDEN CHAPTER SCRIPTURE SHELL
   ========================================================= */

body.mtb-has-scripture-controls main.doc-shell{
  max-width: 2000px !important;   /* adjust if needed */
  margin-left: auto !important;
  margin-right: auto !important;
}
/* =========================================================
   CHAPTER SCRIPTURE — FORCE FULL WIDTH (container chain)
   This overrides any max-width clamps from style.css
   ========================================================= */

body.mtb-has-scripture-controls main.doc-shell,
body.mtb-has-scripture-controls main.doc-shell.wide{
  max-width: none !important;
  width: min(2200px, calc(100vw - 64px)) !important;
  margin-left: auto !important;
  margin-right: auto !important;
}

body.mtb-has-scripture-controls #doc-layout{
  max-width: none !important;
  width: 100% !important;
}

body.mtb-has-scripture-controls article.doc-main{
  max-width: none !important;
  width: 100% !important;
}

body.mtb-has-scripture-controls #doc-target{
  max-width: none !important;
  width: 100% !important;
}

/* The white scripture card wrapper */
body.mtb-has-scripture-controls #doc-target .mtb-chapter-scripture-wrap{
  max-width: none !important;
  width: 100% !important;
}
/* =========================================================
   FIX: doc-main.wide shrinking Chapter Scripture
   ========================================================= */

body.mtb-has-scripture-controls article.doc-main.wide{
  max-width: none !important;
  width: min(2200px, calc(100vw - 64px)) !important;
  margin-left: auto !important;
  margin-right: auto !important;
}
/* =========================================================
   Chapter Scripture: remove the “shift right” gutter
   ========================================================= */

body.mtb-has-scripture-controls .mtb-chapter-scripture-wrap{
  margin-left: auto !important;
  margin-right: auto !important;
}

body.mtb-has-scripture-controls .mtb-chapter-scripture-host{
  padding-left: 0 !important;
  padding-right: 0 !important;
}

/* If border-spacing is causing the left offset, kill it */
body.mtb-has-scripture-controls table.mtb-chapter-scripture{
  margin: 0 !important;
  border-spacing: 0 !important;
  border-collapse: collapse !important;
  width: 100% !important;
}
/* =========================================================
   Center the Chapter Scripture table properly
   ========================================================= */

body.mtb-has-scripture-controls .mtb-chapter-scripture-host{
  display: flex !important;
  justify-content: center !important;
}

body.mtb-has-scripture-controls table.mtb-chapter-scripture{
  width: auto !important;        /* stop stretching full width */
  min-width: 1400px !important;  /* keeps it wide */
  margin: 0 auto !important;
}
/* =========================================================
   PREVENT “JUMP” ON CHAPTER SCRIPTURE
   Apply wide layout on first paint (before JS runs)
   ========================================================= */

html.mtb-pre-scripture article.doc-main{
  max-width: none !important;
  width: min(2200px, calc(100vw - 64px)) !important;
  margin-left: auto !important;
  margin-right: auto !important;
}

/* Keep the table filling the available space */
html.mtb-pre-scripture #doc-target{
  max-width: none !important;
  width: 100% !important;
}
/* =========================================================
   HIDE SCRIPTURE VIEW UNTIL READY (prevents visible "jump")
   ========================================================= */

/* When we are on the scripture tab, keep doc-target hidden */
html.mtb-pre-scripture #doc-target{
  opacity: 0 !important;
}

/* Reveal once JS says it is ready */
html.mtb-pre-scripture.mtb-scripture-ready #doc-target{
  opacity: 1 !important;
  transition: opacity 120ms ease-out;
}
/* =========================================================
   CHAPTER SCRIPTURE: center the white card + center the table
   (fixes the “table hugging the right side” look)
   ========================================================= */

body[data-doc-type="chapter-scripture"] #doc-target{
  margin-left: auto !important;
  margin-right: auto !important;
}

/* Make the host take full width and center its child */
body[data-doc-type="chapter-scripture"] #doc-target .mtb-chapter-scripture-host{
  width: 100% !important;
  display: flex !important;
  justify-content: center !important;
}

/* Ensure the table itself can center inside the host */
body[data-doc-type="chapter-scripture"] #doc-target table.mtb-scripture-table,
body[data-doc-type="chapter-scripture"] #doc-target table.mtb-chapter-scripture{
  margin-left: auto !important;
  margin-right: auto !important;
}

/* If the wrapper is doing something weird, force it to full width too */
body[data-doc-type="chapter-scripture"] #doc-target .mtb-chapter-scripture-wrap{
  width: 100% !important;
}
/* =========================================================
   CHAPTER SCRIPTURE: center the whole block + stop right-shift
   Your Scripture page uses body.mtb-has-scripture-controls
   (NOT data-doc-type="chapter-scripture")
   ========================================================= */

/* 1) Make left/right padding symmetric so the “center” is truly centered */
body.mtb-has-scripture-controls main.doc-shell.wide{
  padding-left: 22px !important;
  padding-right: 22px !important;
}

/* 2) Ensure the injected content column is centered and wide */
body.mtb-has-scripture-controls #doc-target{
  max-width: min(1600px, calc(100vw - 44px)) !important;
  margin-left: auto !important;
  margin-right: auto !important;
}

/* 3) Center the white card */
body.mtb-has-scripture-controls #doc-target .mtb-chapter-scripture-wrap{
  width: 100% !important;
  max-width: 1600px !important;
  margin-left: auto !important;
  margin-right: auto !important;
}

/* 4) Prevent any flex/end alignment from pushing the table right */
body.mtb-has-scripture-controls #doc-target .mtb-chapter-scripture-host{
  width: 100% !important;
  display: block !important;
}

/* 5) Center the table itself */
body.mtb-has-scripture-controls #doc-target table.mtb-scripture-table,
body.mtb-has-scripture-controls #doc-target table.mtb-chapter-scripture{
  margin-left: auto !important;
  margin-right: auto !important;
  width: 100% !important;
  max-width: none !important;
}